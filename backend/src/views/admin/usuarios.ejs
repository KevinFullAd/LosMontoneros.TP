<header class="d-flex justify-content-between align-items-center mb-4 border-bottom pb-2">
    <div>
        <h2 class="h4 mb-0">Administradores</h2>
        <p class="text-muted mb-0">Gestión de cuentas con acceso al panel</p>
    </div>
    <button id="btn-nuevo-admin" class="btn btn-success">
        <i class="bi bi-person-plus me-1"></i>Nuevo administrador
    </button>
</header>

<section class="card shadow-sm">
    <table class="table table-hover align-middle mb-0">
        <thead class="table-light">
            <tr>
                <th>Email</th>
                <th>Rol</th>
                <th class="text-end">Acciones</th>
            </tr>
        </thead>
        <tbody>
            <% if (usuarios?.length) { %>
                <% usuarios.forEach(u=> { %>
                    <tr>
                        <td>
                            <%= u.email %>
                        </td>
                        <td><span class="badge bg-secondary">
                                <%= u.rol || 'admin' %>
                            </span></td>
                        <td class="text-end">
                            <a href="/admin/usuarios/<%= u.id %>/editar" class="btn btn-sm btn-outline-primary me-2">
                                <i class="bi bi-pencil"></i>
                            </a>
                            <button class="btn btn-sm btn-outline-danger btn-eliminar-admin" data-id="<%= u.id %>">
                                <i class="bi bi-trash"></i>
                            </button>
                        </td>
                    </tr>
                    <% }) %>
                        <% } else { %>
                            <tr>
                                <td colspan="3" class="text-center text-muted">No hay administradores registrados.</td>
                            </tr>
                            <% } %>
        </tbody>
    </table>
</section>

<script>
    document.getElementById("btn-nuevo-admin").addEventListener("click", async () => {
        const r = await Swal.fire({
            title: "Crear nuevo administrador",
            text: "¿Deseas ir al formulario de creación?",
            icon: "question",
            showCancelButton: true,
            confirmButtonText: "Sí, continuar",
            cancelButtonText: "Cancelar"
        });
        if (r.isConfirmed) window.location.href = "/admin/usuarios/nuevo";
    });
</script>